<p-dialog 
  [header]="header" 
  [modal]="true" 
  [(visible)]="visible" 
  [style]="{ width: '30rem' }"
  [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
  (onHide)="onModalClose()">

  <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="dialog-form">
    
    @if (mode != 'create') {
      <p-iftalabel class="form-field">
        <p-iconfield class="full-width">
          <p-inputicon class="pi pi-hashtag" />
          <input pInputText id="id" formControlName="id" autocomplete="off" class="full-width" />
        </p-iconfield>
        <label for="id">Id</label>
      </p-iftalabel>
    }

    <p-iftalabel class="form-field">
      <p-iconfield class="full-width">
        <p-inputicon class="pi pi-tag" />
        <input 
          pInputText 
          id="name" 
          formControlName="name" 
          autocomplete="off" 
          class="full-width"
          [class.ng-invalid]="isFieldInvalid('name')" />
      </p-iconfield>
      <label for="name">Name</label>
      @if (isFieldInvalid('name')) {
        <small class="error-message">{{ getFieldError('name') }}</small>
      }
    </p-iftalabel>

    <p-iftalabel class="form-field">
      <p-iconfield class="full-width">
        <p-inputicon class="pi pi-align-left" />
        <input 
          pInputText 
          id="description" 
          formControlName="description" 
          autocomplete="off" 
          class="full-width"
          [class.ng-invalid]="isFieldInvalid('description')" />
      </p-iconfield>
      <label for="description">Description</label>
      @if (isFieldInvalid('description')) {
        <small class="error-message">{{ getFieldError('description') }}</small>
      }
    </p-iftalabel>

    <p-iftalabel class="form-field">
      <p-iconfield class="full-width">
        <p-inputicon class="pi pi-dollar" />
        <input 
          pInputText 
          id="price" 
          formControlName="price" 
          type="number" 
          step="0.01" 
          min="0.01" 
          autocomplete="off" 
          class="full-width"
          [class.ng-invalid]="isFieldInvalid('price')" />
      </p-iconfield>
      <label for="price">Price</label>
      @if (isFieldInvalid('price')) {
        <small class="error-message">{{ getFieldError('price') }}</small>
      }
    </p-iftalabel>

    @if (mode != 'view') {
      <p-button 
        [label]="mode | titlecase" 
        icon="pi pi-check" 
        type="submit"
        class="form-button"
        [disabled]="productForm.invalid"
      ></p-button>
    }

  </form>
</p-dialog>
