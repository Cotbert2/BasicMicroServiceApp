<p-dialog 
    [header]="modalTitle"
    [modal]="true" 
    [visible]="config.visible"
    [closable]="true"
    [draggable]="false"
    [resizable]="false"
    [style]="{ width: '500px', minWidth: '400px' }"
    (onHide)="onDialogHide()">
    
    <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
        <div class="flex flex-col gap-4">
            
            <!-- ID Field (only shown in view/edit mode with existing product) -->
            <div *ngIf="config.product" class="flex flex-col">
                <p-floatLabel>
                    <input 
                        pInputText 
                        id="productId" 
                        [value]="config.product.id" 
                        readonly 
                        class="w-full" />
                    <label for="productId">ID</label>
                </p-floatLabel>
            </div>

            <!-- Name Field -->
            <div class="flex flex-col">
                <p-floatLabel>
                    <input 
                        pInputText 
                        id="productName" 
                        formControlName="name"
                        [readonly]="isReadonly"
                        [class.p-invalid]="isFieldInvalid('name')"
                        class="w-full" />
                    <label for="productName">Nombre *</label>
                </p-floatLabel>
                <small 
                    *ngIf="isFieldInvalid('name')" 
                    class="p-error mt-1">
                    {{ getFieldError('name') }}
                </small>
            </div>

            <!-- Description Field -->
            <div class="flex flex-col">
                <p-floatLabel>
                    <textarea 
                        id="productDescription" 
                        formControlName="description"
                        [readonly]="isReadonly"
                        [class.p-invalid]="isFieldInvalid('description')"
                        rows="3"
                        class="w-full p-inputtext">
                    </textarea>
                    <label for="productDescription">Descripci√≥n *</label>
                </p-floatLabel>
                <small 
                    *ngIf="isFieldInvalid('description')" 
                    class="p-error mt-1">
                    {{ getFieldError('description') }}
                </small>
            </div>

            <!-- Price Field -->
            <div class="flex flex-col">
                <p-floatLabel>
                    <p-inputNumber 
                        inputId="productPrice"
                        formControlName="price"
                        [readonly]="isReadonly"
                        [class.p-invalid]="isFieldInvalid('price')"
                        mode="currency" 
                        currency="USD" 
                        locale="en-US"
                        [min]="0"
                        [step]="0.01"
                        styleClass="w-full">
                    </p-inputNumber>
                    <label for="productPrice">Precio *</label>
                </p-floatLabel>
                <small 
                    *ngIf="isFieldInvalid('price')" 
                    class="p-error mt-1">
                    {{ getFieldError('price') }}
                </small>
            </div>

        </div>
    </form>

    <ng-template pTemplate="footer">
        <div class="flex justify-end gap-2">
            <p-button 
                label="Cancelar" 
                icon="pi pi-times" 
                [text]="true"
                severity="secondary"
                (onClick)="onCancelClick()">
            </p-button>
            
            <p-button 
                *ngIf="config.mode === 'edit'" 
                [label]="submitButtonLabel" 
                icon="pi pi-check" 
                [disabled]="productForm.invalid"
                (onClick)="onSubmit()">
            </p-button>
        </div>
    </ng-template>
    
</p-dialog>
